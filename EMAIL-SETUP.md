# 📧 Email Integration Setup Guide

This guide shows how to set up **EmailJS** to receive customer quote requests directly in your email inbox.

## 🎯 What This Does

When customers submit the fast quote form, you'll receive:
- **Business Email**: Complete quote details with customer info and AI-detected items
- **Customer Email**: Automatic confirmation with quote summary and next steps

## 🚀 Step-by-Step Setup

### 1. Create EmailJS Account

1. Go to [EmailJS Dashboard](https://dashboard.emailjs.com/)
2. Sign up with Google/GitHub or email
3. **Free plan**: 200 emails/month (perfect for starting)

### 2. Set Up Email Service

1. **Add Email Service:**
   - Click "Add New Service"
   - Choose your email provider:
     - **Gmail** (recommended for easy setup)
     - **Outlook** 
     - **Yahoo**
     - **Custom SMTP**

2. **Configure Service:**
   - Follow the provider-specific instructions
   - **Note:** For Gmail, you may need to enable "Less secure app access" or use App Passwords

### 3. Create Email Templates

#### Template 1: Business Notification (Required)

1. Click "Create New Template"
2. **Template ID**: `template_quote_request` 
3. **Template Content:**

```html
<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .header { background: #00a0dc; color: white; padding: 20px; text-align: center; }
        .content { padding: 20px; }
        .quote-summary { background: #f8f9fa; padding: 15px; margin: 15px 0; border-left: 4px solid #00a0dc; }
        .detected-items { background: #e8f5e8; padding: 15px; margin: 15px 0; border-radius: 5px; }
        .urgent { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <h1>🏠 New Austin Moving Quote Request</h1>
    </div>
    
    <div class="content">
        <p class="urgent">⏰ RESPOND WITHIN 2 HOURS</p>
        
        <h2>📋 Customer Information</h2>
        <ul>
            <li><strong>Name:</strong> {{customer_name}}</li>
            <li><strong>Email:</strong> {{customer_email}}</li>
            <li><strong>Phone:</strong> {{customer_phone}}</li>
            <li><strong>Submission Time:</strong> {{submission_time}}</li>
        </ul>

        <h2>🚚 Move Details</h2>
        <ul>
            <li><strong>Move Type:</strong> {{move_type}}</li>
            <li><strong>Move Date:</strong> {{move_date}}</li>
            <li><strong>From:</strong> {{from_address}}</li>
            <li><strong>To:</strong> {{to_address}}</li>
            <li><strong>Size:</strong> {{estimated_size}}</li>
            <li><strong>Special Items:</strong> {{special_items}}</li>
        </ul>

        <div class="quote-summary">
            <h2>💰 AI-Generated Quote: {{total_cost}}</h2>
            <p><strong>Media Files Uploaded:</strong> {{media_file_count}}</p>
        </div>

        <div class="detected-items">
            <h3>🤖 AI-Detected Items:</h3>
            <p>{{detected_items}}</p>
        </div>

        <h3>📋 Additional Notes:</h3>
        <p>{{notes}}</p>

        <hr>
        <p><strong>Next Steps:</strong></p>
        <ol>
            <li>Review uploaded photos/videos (if any)</li>
            <li>Contact customer within 2 hours</li>
            <li>Provide refined quote based on actual items</li>
            <li>Schedule move date and time</li>
        </ol>

        <p><em>This quote was generated by Austin Move Finder's AI system. Please review and adjust pricing based on actual conditions.</em></p>
    </div>
</body>
</html>
```

#### Template 2: Customer Confirmation (Optional)

1. **Template ID**: `template_customer_confirmation`
2. **Template Content:**

```html
<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .header { background: #00a0dc; color: white; padding: 20px; text-align: center; }
        .content { padding: 20px; }
        .highlight { background: #e8f4fd; padding: 15px; margin: 15px 0; border-radius: 5px; }
        .footer { background: #f8f9fa; padding: 15px; text-align: center; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>🎉 Quote Request Received!</h1>
        <p>Austin Move Finder</p>
    </div>
    
    <div class="content">
        {{customer_message}}
    </div>

    <div class="footer">
        <p><strong>Austin Move Finder</strong><br>
        📞 (512) 555-MOVE<br>
        📧 hello@austinmovefinder.com<br>
        🌐 austinmovefinder.com</p>
    </div>
</body>
</html>
```

### 4. Get Your Credentials

1. **Service ID**: Found in your EmailJS dashboard under "Email Services"
2. **Template ID**: Found under "Email Templates" 
3. **Public Key**: Go to "Account" → "General" → "Public Key"

### 5. Update Environment Variables

Edit your `.env.local` file:

```bash
# EmailJS Configuration
VITE_EMAILJS_SERVICE_ID=service_xxxxxxx
VITE_EMAILJS_TEMPLATE_ID=template_quote_request  
VITE_EMAILJS_PUBLIC_KEY=xxxxxxxxxxxxxxxx
```

### 6. Update Business Email

In `/src/services/emailService.ts`, line 25:

```typescript
to_email: 'your-actual-business-email@gmail.com', // Replace with your email
```

## 🧪 Testing

1. **Start your development server:**
   ```bash
   npm run dev
   ```

2. **Go to:** http://localhost:3001/fast-quote

3. **Test the form:**
   - Fill out customer details
   - Upload a test image (optional)
   - Click "Get My Fast Quote"

4. **Check your email** - you should receive the quote request!

## 📧 What You'll Receive

### Business Email Example:
```
Subject: 🏠 New Austin Moving Quote Request

⏰ RESPOND WITHIN 2 HOURS

📋 Customer Information
• Name: John Smith
• Email: john@example.com  
• Phone: (512) 555-1234
• Submission Time: 12/25/2024, 2:30:00 PM

🚚 Move Details
• Move Type: Local Austin Move
• Move Date: 2024-01-15
• From: 123 Main St, Austin, TX
• To: 456 Oak Ave, Austin, TX

💰 AI-Generated Quote: $2,450
🤖 AI-Detected Items: couch (95% confidence), dining table (88% confidence), chair (92%)
```

## 🔧 Customization

### Change Email Templates
1. Log into EmailJS dashboard
2. Edit your templates
3. No code changes needed!

### Add More Email Recipients
In `emailService.ts`:
```typescript
to_email: 'sales@yourcompany.com,manager@yourcompany.com',
```

### Custom Email Subject
In template settings, set:
```
Subject: 🚚 New Moving Quote: {{customer_name}} - ${{total_cost}}
```

## 💰 Pricing

- **Free**: 200 emails/month
- **Personal**: $15/month for 10k emails
- **Team**: $70/month for 100k emails

## 🐛 Troubleshooting

### "Email service not configured" error:
- Check your `.env.local` has all three variables
- Restart your development server after adding variables

### Emails not sending:
- Verify EmailJS service is active
- Check browser console for errors
- Test your EmailJS service from their dashboard

### Gmail not working:
- Enable 2-factor authentication
- Generate App Password instead of regular password
- Use App Password in EmailJS service setup

## 🔒 Security Notes

- **Never commit** your actual EmailJS credentials to git
- Use environment variables only  
- EmailJS keys are safe for frontend use (they're designed for it)
- Consider rate limiting for production use

## 🚀 Production Deployment

For Cloudflare Pages/Vercel/Netlify:
1. Add environment variables in your hosting dashboard
2. Set the same `VITE_EMAILJS_*` variables
3. Deploy!

Your moving quote system is now ready to capture leads and send them directly to your inbox! 📬