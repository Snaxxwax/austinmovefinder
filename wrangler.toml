# wrangler.toml
name = "austin-move-finder"
compatibility_date = "2024-09-24"

# âœ… Required for Cloudflare Pages so it runs `npm run build` and picks up /dist
pages_build_output_dir = "dist"

# Pages configuration
[env.production]
vars = { ENVIRONMENT = "production" }

# KV namespace for sessions (as mentioned in build warning)
[[env.production.kv_namespaces]]
binding = "SESSION"
id = "your_production_kv_namespace_id"
preview_id = "your_production_kv_namespace_id"

[env.preview]
vars = { ENVIRONMENT = "preview" }

# KV namespace for sessions (preview)
[[env.preview.kv_namespaces]]
binding = "SESSION"
id = "your_preview_kv_namespace_id"
preview_id = "your_preview_kv_namespace_id"

# R2 bucket binding for form submissions
[[env.production.r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "austin-move-finder-submissions"

[[env.preview.r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "austin-move-finder-submissions-preview"

# Environment variables (secrets set via Cloudflare dashboard)
# TURNSTILE_SECRET_KEY - Turnstile secret for bot protection
# EMAIL_API_KEY - For email notifications (Resend/SendGrid)
# EMAIL_FROM - Sender email address
# EMAIL_TO - Recipient email address